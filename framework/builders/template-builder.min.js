"use strict";window.themeCoreAdmin||(window.themeCoreAdmin={}),function(e){themeCoreAdmin.Metabox=function(){var a=function(){"video"==e(".editor-post-format select")?(e("#featured_video").closest(".rwmb-field").removeClass("hidden"),e('[name="supported_images"]').closest(".rwmb-field").addClass("hidden")):(e("#featured_video").closest(".rwmb-field").addClass("hidden"),e('[name="supported_images"]').closest(".rwmb-field").removeClass("hidden"))};e(window).on("load",a),e(window).on("load",(function(){e.fn.wpColorPicker&&e("input.alpus-color-picker:not(.wp-color-picker)").wpColorPicker()})),e("body").on("change",".editor-post-format select",a);var t={};e(".rwmb-meta-box .alpus-metabox-condition").each((function(){var a=e(this),o=a.data("condition").split("=");void 0===t[o[0]]&&(t[o[0]]={}),void 0===t[o[0]][o[1]]&&(t[o[0]][o[1]]=[]),t[o[0]][o[1]].push(a)}));var o=function(e,a){for(var t in e){var o=e[t];a.val()==t?o.forEach((function(e){e.closest(".rwmb-row").slideDown()})):o.forEach((function(e){e.closest(".rwmb-row").slideUp()}))}};for(var n in t){var l=e("#"+n);l.length&&(o(t[n],l),l.on("change",(function(){o(t[n],l)})))}},themeCoreAdmin.Sidebar=function(){e("body").on("click",".alpus-wrap #add_widget_area",(function(){var a=prompt("Widget Area Name"),t="",o=-1,n=e(this);if(a){if(n.attr("disabled","disabled"),"-"==(t=a.toLowerCase().replace(/(\W|_)+/g,"-"))[0]&&"-"==t[t.length-1]?t=t.slice(1,-1):"-"==t[0]?t=t.slice(1):"-"==t[t.length-1]&&(t=t.slice(0,-1)),alpus_core_vars.sidebars)Object.keys(alpus_core_vars.sidebars).forEach((function(e){if(0===e.indexOf(t)){var a=e.replace(t,"");""==a?o=Math.max(o,0):Number(a.slice(1))&&(o=Math.max(o,Number(a.slice(1))))}}));o>=0&&(t=t+"-"+(o+1)),e.ajax({url:alpus_core_vars.ajax_url,data:{action:"alpus_add_widget_area",nonce:alpus_core_vars.nonce,name:a,slug:t},type:"post",success:function(o){alpus_core_vars.sidebars[t]=a;var l="";o.data.url&&(l=o.data.url),e('<tr id="'+t+'" class="sidebar"><td class="title column-title">'+(l?'<a href="'+l+'">':"")+a+(l?"</a>":"")+'</td><td class="slug column-slug">'+t+'</td><td class="remove column-remove"><a href="#">Remove</a></td></tr>').appendTo(e("#sidebar_table tbody#the-list")).hide().fadeIn(),n.removeAttr("disabled")}}).fail((function(e){console.log(e)}))}})),e("body").on("click","#sidebar_table .column-remove > a",(function(){if(confirm("Do you want to remove this sidebar?")){var a=e(this),t=a.closest("tr").find(".column-slug").text();e.ajax({url:alpus_core_vars.ajax_url,data:{action:"alpus_remove_widget_area",nonce:alpus_core_vars.nonce,slug:t},type:"post",success:function(o){delete alpus_core_vars.sidebars[t],a.closest("tr").fadeOut((function(){e(this).remove()})),a.removeAttr("disabled")}}).fail((function(e){console.log(e)}))}}))},themeCoreAdmin.TemplateWizard=function(){function a(){o(e(this).next(".alpus-modal"))}function t(){o(e(this).parent(".alpus-modal"))}function o(e){(e=e.add(e.prev(".alpus-modal-overlay"))).removeClass("alpus-modal-fade"),setTimeout((function(){e.removeClass("alpus-modal-open")}),50)}function n(a){var t;a.preventDefault(),(t=(t=e("#alpus_new_template")).add(t.prev(".alpus-modal-overlay"))).addClass("alpus-modal-open"),setTimeout((function(){t.addClass("alpus-modal-fade")})),e(".template-name").focus(),e("#alpus-new-template-id").add("#alpus-new-template-type").add("#alpus-new-template-name").val("")}function l(a){var t=e(".alpus-modal .template-name").val();t?e.ajax({url:alpus_core_vars.ajax_url,data:{action:"alpus_save_template",nonce:alpus_core_vars.nonce,type:e(".alpus-modal .template-type").val(),name:t,template_id:e("#alpus-new-template-id").val(),template_type:e("#alpus-new-template-type").val(),template_category:e(".alpus-new-template-form .template-type").val(),page_builder:e("#alpus-elementor-studio").length?"elementor":""},type:"post",success:function(a){var t=parseInt(a.data);e("#alpus-elementor-studio").length?window.location.href=e(".alpus-add-new-template").attr("href").replace("edit.php?post_type="+alpus_admin_vars.theme+"_template",t&&"type"!=e(".alpus-modal .template-type").val()?"post.php?post="+t+"&action=elementor":"post.php?post="+t+"&action=edit&post_type="+alpus_admin_vars.theme+"_template"):window.location.href=e(".alpus-add-new-template").attr("href").replace("edit.php?post_type="+alpus_admin_vars.theme+"_template",t&&"post.php?post="+t+"&action=edit&post_type="+alpus_admin_vars.theme+"_template")}}).fail((function(e){console.log(e)})):e(".alpus-modal .template-name").focus()}function i(a){13==a.keyCode&&e(".alpus-modal #alpus-create-template-type").length&&l()}return{init:function(){e(document.body).on("click",".alpus-add-new-template",n).on("click",".alpus-modal-close",t).on("click",".alpus-modal-overlay",a).on("click",".alpus-modal #alpus-create-template-type",l).on("keydown",i)}}}(),themeCoreAdmin.BuilderAddons=function(){var a;a=!0,e(document.body).hasClass("elementor-editor-active")&&"undefined"!=typeof elementor&&(elementor.on("panel:init",(function(){var a='<div id="alpus-elementor-addons" class="elementor-panel-footer-tool tooltip-target">                        <span class="alpus-elementor-addons-toggle" data-tooltip="'+alpus_core_vars.texts.elementor_addon_settings+'">                        <i class="alpus-mini-logo"></i></span><div class="dropdown-box"><ul class="options">';alpus_core_vars.builder_addons.length&&alpus_core_vars.builder_addons.forEach((function(e){e.elementor&&(a+=e.elementor)})),e(a+="</ul></div></div>").insertAfter("#elementor-panel-footer-saver-preview").find(".alpus-elementor-addons-toggle").tipsy({gravity:"s",title:function(){return this.getAttribute("data-tooltip")}})})),elementor.on("document:loaded",(function(){a&&(e("body").on("click",".alpus-elementor-addons-toggle",(function(a){e(this).siblings(".dropdown-box").toggleClass("show"),e(this).toggleClass("dropdown-active")})).on("click",(function(a){e("#alpus-elementor-addons .dropdown-box").removeClass("show"),e(".alpus-elementor-addons-toggle.dropdown-active").removeClass("dropdown-active")})).on("click","#alpus-elementor-addons",(function(e){e.stopPropagation()})).on("click","#alpus-custom-css",(function(a){e("#elementor-panel-footer-settings").trigger("click"),e(".elementor-tab-control-advanced a").trigger("click")})).on("click","#alpus-custom-js",(function(a){e("#elementor-panel-footer-settings").trigger("click"),e(".elementor-tab-control-advanced a").trigger("click"),setTimeout((function(){e(".elementor-control-alpus_custom_js_settings .elementor-panel-heading").trigger("click")}),100)})).on("click","#alpus-edit-area",(function(a){e("#elementor-panel-footer-settings").trigger("click"),e(".elementor-control-alpus_edit_area .elementor-section-toggle").trigger("click")})),a=!1)}))),function(){if(e(document.body).hasClass("vc_editor vc_inline-shortcode-edit-form")||e("#post-body #wpb_visual_composer").length){alpus_core_vars.wpb_preview_panels&&Object.keys(alpus_core_vars.wpb_preview_panels).forEach((function(a){e("#vc_ui-panel-row-layout").before(e(alpus_core_vars.wpb_preview_panels[a]))})),e(".alpus-wpb-addons #alpus-popup-options").length&&(vc.AlpusPopupOptionsUIPanelEditor=vc.PostSettingsPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({panelName:"alpus_popup_options",uiEvents:{setSize:"setEditorSize",show:"setEditorSize"},setSize:function(){this.trigger("setSize")},setDefaultHeightSettings:function(){this.$el.css("height","70vh")},setEditorSize:function(){this.editor.setSizeResizable()}}),vc.alpus_popup_options_view=new vc.AlpusPopupOptionsUIPanelEditor({el:"#vc_ui-panel-alpus-popup-options"}),window.vc.ShortcodesBuilder&&(window.vc.ShortcodesBuilder.prototype.save=function(a){var t=this.getContent(),o={action:"vc_save"};o.vc_post_custom_css=window.vc.$custom_css.val(),o.content=this.wpautop(t),a&&(o.post_status=a,e(".vc_button_save_draft").hide(100),e("#vc_button-update").text(window.i18nLocale.update_all)),window.vc.update_title&&(o.post_title=this.getTitle());var n=e("#vc_ui-panel-alpus-popup-options"),l=n.find("#vc_popup-width-field").val(),i=n.find("#vc_popup-h_pos-field").val(),p=n.find("#vc_popup-v_pos-field").val(),d=n.find("#vc_popup-border-field").val(),r=n.find("#vc_popup-margin-top-field").val(),s=n.find("#vc_popup-margin-right-field").val(),c=n.find("#vc_popup-margin-bottom-field").val(),m=n.find("#vc_popup-margin-left-field").val(),h=n.find("#vc_popup-animation-field").val(),u=n.find("#vc_popup-anim-duration-field").val();o.alpus_popup_options={width:l||600,h_pos:i||"center",v_pos:p||"center",border:d||"0",top:r||"",right:s||"",bottom:c||"",left:m||"",popup_animation:h,popup_anim_duration:u||400},this.ajax(o).done((function(){window.vc.unsetDataChanged(),window.vc.showMessage(window.i18nLocale.vc_successfully_updated||"Successfully updated!")}))}),e("body").on("click",".alpus-wpb-addons #alpus-popup-options",(function(e){e&&e.preventDefault&&e.preventDefault(),vc.alpus_popup_options_view.render().show()})).on("click",'#vc_ui-panel-alpus-popup-options .vc_ui-button[data-vc-ui-element="button-save"]',(function(){if(vc.$frame_body){var a=e(this).closest(".vc_ui-alpus-panel"),t=a.find("#vc_popup-width-field").val(),o=a.find("#vc_popup-h_pos-field").val(),n=a.find("#vc_popup-v_pos-field").val(),l=a.find("#vc_popup-border-field").val(),i=a.find("#vc_popup-margin-top-field").val(),p=a.find("#vc_popup-margin-right-field").val(),d=a.find("#vc_popup-margin-bottom-field").val(),r=a.find("#vc_popup-margin-left-field").val();vc.$frame_body.find(".mfp-alpus .mfp-content").css({justifyContent:o,alignItems:n}),vc.$frame_body.find(".mfp-alpus .popup").css({width:t?Number(t)+"px":"600px",marginTop:i?i+"px":"",marginRight:p?p+"px":"",marginBottom:d?d+"px":"",marginLeft:r?r+"px":""}),vc.$frame_body.find(".mfp-alpus .alpus-popup-content").css({borderRadius:l?Number(l)+"px":""})}else vc.alpus_popup_options_view.hide()})))}}()},e(document).on("ready",(function(){themeCoreAdmin.Metabox(),void 0!==alpus_core_vars.sidebars&&themeCoreAdmin.Sidebar(),themeCoreAdmin.TemplateWizard.init(),void 0!==alpus_core_vars.condition_network&&themeCoreAdmin.TemplateCondition(),themeCoreAdmin.BuilderAddons()}))}(jQuery);